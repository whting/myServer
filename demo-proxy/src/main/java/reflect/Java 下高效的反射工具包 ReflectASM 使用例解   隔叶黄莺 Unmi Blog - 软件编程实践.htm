<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Java 下高效的反射工具包 ReflectASM 使用例解 | 隔叶黄莺 Unmi Blog - 软件编程实践</title>
<link rel="shortcut icon" href="http://unmi.cc/wp-content/themes/garland-revisited/favicon.ico" />
<link rel="pingback" href="http://unmi.cc/xmlrpc.php" />
<style type="text/css" media="screen">

@import "http://unmi.cc/wp-content/themes/garland-revisited/style.php";
@import "http://unmi.cc/wp-content/themes/garland-revisited/css/style-full.css";</style>
<link rel="alternate" type="application/rss+xml" title="隔叶黄莺 Unmi Blog &raquo; Feed" href="http://unmi.cc/feed/" />
<link rel="alternate" type="application/rss+xml" title="隔叶黄莺 Unmi Blog &raquo; Comments Feed" href="http://unmi.cc/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="隔叶黄莺 Unmi Blog &raquo; Java 下高效的反射工具包 ReflectASM 使用例解 Comments Feed" href="http://unmi.cc/java-reflectasm-bytecode-usage/feed/" />
<link rel='stylesheet' id='yarppWidgetCss-css'  href='http://unmi.cc/wp-content/plugins/yet-another-related-posts-plugin/style/widget.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_related-posts-css'  href='http://unmi.cc/wp-content/plugins/jetpack/modules/related-posts/related-posts.css?ver=20140307' type='text/css' media='all' />
<link rel='stylesheet' id='wp-recentcomments-css'  href='http://unmi.cc/wp-content/plugins/wp-recentcomments/css/wp-recentcomments.css?ver=2.2.7' type='text/css' media='screen' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://unmi.cc/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<link rel='stylesheet' id='avhec-widget-css'  href='http://unmi.cc/wp-content/plugins/extended-categories-widget/3.6/css/avh-ec.widget.css?ver=3.9.3' type='text/css' media='all' />
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
<script type='text/javascript'>try{jQuery.noConflict();}catch(e){};</script>
<script type='text/javascript' src='http://unmi.cc/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20140307'></script>
<script type='text/javascript' src='http://unmi.cc/wp-includes/js/tinymce/tiny_mce.js?ver=20081129'></script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/syntax-button/editor_plugin.js?ver=20120314'></script>
<script type='text/javascript' src='http://unmi.cc/wp-includes/js/tinymce/langs/wp-langs-en.js?ver=20081129'></script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/tinymcecomments/comment-reply.dev.js?ver=20090102'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://unmi.cc/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://unmi.cc/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='AspectJ 基于自定义的方法注解来拦截方法' href='http://unmi.cc/aspectj-baseon-annotation-method/' />
<link rel='next' title='再说 Java 中使用正则表达式进行后向引用($1,$2...)' href='http://unmi.cc/re-java-regex-replace/' />
<meta name="generator" content="WordPress 3.9.1" />
<link rel='shortlink' href='http://wp.me/p11aRw-1dz' />

<link rel="stylesheet" href="http://unmi.cc/wp-content/plugins/dd-formmailer/dd-formmailer.css" type="text/css" media="screen" />

<script type="text/javascript" src="http://unmi.cc/wp-content/plugins/dd-formmailer/date_chooser.js"></script>
<meta name="DMSGuestbook" content="1.17.4" />
<link rel="stylesheet" href="http://unmi.cc/wp-content/plugins/dmsguestbook/dmsguestbook.css" type="text/css" media="screen" />	<script src="http://unmi.cc/wp-content/plugins/enhanced-categories/js/enhanced-categories.js" type="text/javascript" ></script>
	
<!-- Start Of Additions Generated By Greg's Threaded Comment Numbering Plugin 1.5.3 -->
<link rel='stylesheet' id='gtcn-plugin-css'  href='http://unmi.cc/wp-content/plugins/gregs-threaded-comment-numbering/gtcn-css.css?ver=1.5.3' type='text/css' media='all' />
<!-- End Of Additions Generated By Greg's Threaded Comment Numbering Plugin 1.5.3 -->
	<script type="text/javascript" src="http://unmi.cc/wp-content/plugins/search-permalink.php?out=js"> </script>
	<script type="text/javascript">
      /* <![CDATA[ */
      function brstonewline(element_id, html, body) {
	      html = html.replace(/<br\s*\/>/gi, "\n");
	      return html;
	   }
	   
	   function insertHTML(html) {
	      tinyMCE.execCommand("mceInsertContent",false, html);
	   }
	   
      tinyMCEPreInit = {
	      base : "http://unmi.cc/wp-includes/js/tinymce",
	      suffix : "",
	      query : "ver=20081129",
	      mceInit : {mode:"exact"	,elements:"comment"	,theme:"advanced"	,theme_advanced_buttons1:"bold,italic,underline,|,strikethrough,|,blockquote,bullist,numlist,|,undo,redo,|,link,unlink,|,forecolor,backcolor,|,removeformat,image"	,theme_advanced_buttons2:""	,theme_advanced_buttons3:""	,theme_advanced_toolbar_location:"top"	,theme_advanced_toolbar_align:"left"	,theme_advanced_statusbar_location:"none"	,theme_advanced_resizing:"false"	,theme_advanced_resize_horizontal:""	,theme_advanced_disable:"code"	,force_p_newlines:""	,force_br_newlines:"1"	,forced_root_block:"p"	,gecko_spellcheck:"1"	,skin:"default"	,content_css:"http://unmi.cc/wp-content/plugins/tinymcecomments/unmi_custom_css.style"	,directionality:"ltr"	,save_callback:"brstonewline"	,entity_encoding:"raw"	,plugins:""	,language:"en"	},

	      go : function() {
		      var t = this, sl = tinymce.ScriptLoader, ln = t.mceInit.language, th = t.mceInit.theme, pl = t.mceInit.plugins;

		      sl.markDone(t.base + '/langs/' + ln + '.js');

		      sl.markDone(t.base + '/themes/' + th + '/langs/' + ln + '.js');
		      sl.markDone(t.base + '/themes/' + th + '/langs/' + ln + '_dlg.js');

		      tinymce.each(pl.split(','), function(n) {
			      if (n && n.charAt(0) != '-') {
				      sl.markDone(t.base + '/plugins/' + n + '/langs/' + ln + '.js');
				      sl.markDone(t.base + '/plugins/' + n + '/langs/' + ln + '_dlg.js');
			      }
		      });

	      },
	      load_ext : function(url,lang) {
		      var sl = tinymce.ScriptLoader;

		      sl.markDone(url + '/langs/' + lang + '.js');
		      sl.markDone(url + '/langs/' + lang + '_dlg.js');
	      }
      };
      
      var subBtn = document.getElementById("submit");
	   if (subBtn != null) {
	      subBtn.onclick=function() {
	         var inst = tinyMCE.getInstanceById("comment");
	         document.getElementById("comment").value = inst.getContent();
	         document.getElementById("commentform").submit();
	         return false;
	      }
	   }
	   tinyMCEPreInit.go();
      tinyMCE.init(tinyMCEPreInit.mceInit);
      /* ]]> */
      </script>
      
	 
	<script type="text/javascript">
	 //<![CDATA[ 
	function toggleLinkGrp(id) {
	   var e = document.getElementById(id);
	   if(e.style.display == 'block')
			e.style.display = 'none';
	   else
			e.style.display = 'block';
	}
	// ]]>
	</script> 
	
<!-- All in One SEO Pack 2.1.2 by Michael Torbert of Semper Fi Web Design[255,316] -->
<meta name="description" content="ReflectASM&nbsp;使用字节码生成的方式实现了更为高效的反射机制。执行时会生成一个存取类来 set/get&nbsp;字段，访问方法或创建实例。一看到&nbsp;ASM&nbsp;就能领悟到&nbsp;ReflectASM&nbsp;会用字节码生成的方式，而不是依赖于&nbsp;Java&nbs" />

<meta name="keywords" content="java,reflect,reflectasm,java/jee" />

<link rel="canonical" href="http://unmi.cc/java-reflectasm-bytecode-usage/" />
<!-- /all in one seo pack -->

	<!-- Clean Archives Reloaded v3.2.0 | http://www.viper007bond.com/wordpress-plugins/clean-archives-reloaded/ -->
	<style type="text/css">.car-collapse .car-yearmonth { cursor: s-resize; } </style>
	<script type="text/javascript">
		/* <![CDATA[ */
			jQuery(document).ready(function() {
				jQuery('.car-collapse').find('.car-monthlisting').hide();
				jQuery('.car-collapse').find('.car-monthlisting:first').show();
				jQuery('.car-collapse').find('.car-yearmonth').click(function() {
					jQuery(this).next('ul').slideToggle('fast');
				});
				jQuery('.car-collapse').find('.car-toggler').click(function() {
					if ( 'Expand All' == jQuery(this).text() ) {
						jQuery(this).parent('.car-container').find('.car-monthlisting').show();
						jQuery(this).text('Collapse All');
					}
					else {
						jQuery(this).parent('.car-container').find('.car-monthlisting').hide();
						jQuery(this).text('Expand All');
					}
					return false;
				});
			});
		/* ]]> */
	</script>

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="http://unmi.cc/?custom-css=1&#038;csblog=1&#038;cscache=6&#038;csrev=97" />
		</head>
<body class="single single-post postid-4685 single-format-standard sidebars">
<div id="navigation"></div>
<div id="wrapper">
<div id="container" class="clear-block">
<div id="header">
<div id="logo-floater">
<h1 style="display:inline">
<a href="http://unmi.cc/">隔叶黄莺 Unmi Blog</a> <span style="font-style: italic; font-size: 60%;"></span>
</h1>
&nbsp;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<script type="text/javascript"><!--
google_ad_client = "ca-pub-1353471013336561";
/* Header Banner */
google_ad_slot = "4729729935";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<!-- <ul class="links primary-links"> -->
<ul id="dropmenu">
<li class="page_item page-item-10"><a href="http://unmi.cc/home/">首页</a></li>
<li class="page_item page-item-2502"><a href="http://unmi.cc/guestbook-3/">留言</a></li>
<li class="page_item page-item-1244"><a href="http://unmi.cc/contact/">联系</a></li>
</ul>                
</div> <!-- /header -->
<div id="sidebar-left" class="sidebar">
<ul class="menu">
<li id="text-13" class="widget widget_text">			<div class="textwidget"><div style="margin-bottom:40px;color:#666666; padding-left:232px;width:600px;">
主机辗转又回到了香港，谢谢光临！
</div></div>
		</li>
<li id="ajax-calendar-4" class="widget ajax_calendar_widget"><h2 class="widgettitle">日历</h2>
<table id="wp-calendar">
	<caption>July 2014</caption>
	<thead>
	<tr>
		<th scope="col" title="Monday">M</th>
		<th scope="col" title="Tuesday">T</th>
		<th scope="col" title="Wednesday">W</th>
		<th scope="col" title="Thursday">T</th>
		<th scope="col" title="Friday">F</th>
		<th scope="col" title="Saturday">S</th>
		<th scope="col" title="Sunday">S</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a onclick="microAjax(this.href + '?ajax=true',show_micro_ajax); return false" href="http://unmi.cc/2014/06/" title="View posts for June 2014">&laquo; Jun</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="1" class="pad">&nbsp;</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td>
	</tr>
	<tr>
		<td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td>
	</tr>
	<tr>
		<td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td>
	</tr>
	<tr>
		<td><a href="http://unmi.cc/2014/07/21/" title="Java 和 Scala 调用变参的方式">21</a></td><td><a href="http://unmi.cc/2014/07/22/" title="Mac OS X 下吾所倾爱的三个程序员编辑器">22</a></td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td>
	</tr>
	<tr>
		<td id="today">28</td><td>29</td><td>30</td><td>31</td>
		<td class="pad" colspan="3">&nbsp;</td>
	</tr>
	</tbody>
	</table><script type="text/javascript">
function show_micro_ajax(response){document.getElementById('wp-calendar').innerHTML=response;}
function microAjax(url,cF){this.bF=function(caller,object){return function(){return caller.apply(object,new Array(object));}};
this.sC=function(object){if(this.r.readyState==4){this.cF(this.r.responseText);}};
this.gR=function(){if(window.ActiveXObject)
return new ActiveXObject('Microsoft.XMLHTTP');else if(window.XMLHttpRequest)
return new XMLHttpRequest();else return false;};
if(arguments[2])this.pb=arguments[2];else this.pb="";this.cF=cF;this.url=url;this.r=this.gR();if(this.r){this.r.onreadystatechange=this.bF(this.sC,this);if(this.pb!=""){this.r.open("POST",url,true);this.r.setRequestHeader('Content-type','application/x-www-form-urlencoded');this.r.setRequestHeader('Connection','close');}else{this.r.open("GET",url,true);}
this.r.send(this.pb);}}
</script>
</li>
<li id="extended-categories-8" class="widget widget_extended-categories"><!-- AVH Extended Categories version 3.9.3 | http://blog.avirtualhome.com/wordpress-plugins/ --><h2 class="widgettitle">日志分类</h2>
<ul>	<li class="cat-item cat-item-417"><div class="avhec-widget-line"><a href="http://unmi.cc/category/mobile/" title="View all posts filed under Mobile">Mobile</a><div class="avhec-widget-count"> (53)</div></div>
<ul class="children">
	<li class="cat-item cat-item-418"><div class="avhec-widget-line"><a href="http://unmi.cc/category/mobile/android-mobile/" title="View all posts filed under Android">Android</a><div class="avhec-widget-count"> (7)</div></div>
</li>
	<li class="cat-item cat-item-433"><div class="avhec-widget-line"><a href="http://unmi.cc/category/mobile/ios/" title="View all posts filed under iOS">iOS</a><div class="avhec-widget-count"> (44)</div></div>
</li>
</ul>
</li>
	<li class="cat-item cat-item-697"><div class="avhec-widget-line"><a href="http://unmi.cc/category/others/" title="View all posts filed under Others">Others</a><div class="avhec-widget-count"> (3)</div></div>
</li>
	<li class="cat-item cat-item-158"><div class="avhec-widget-line"><a href="http://unmi.cc/category/perl/" title="View all posts filed under Perl">Perl</a><div class="avhec-widget-count"> (6)</div></div>
</li>
	<li class="cat-item cat-item-458"><div class="avhec-widget-line"><a href="http://unmi.cc/category/ruby/" title="View all posts filed under Ruby">Ruby</a><div class="avhec-widget-count"> (7)</div></div>
</li>
	<li class="cat-item cat-item-32"><div class="avhec-widget-line"><a href="http://unmi.cc/category/php/" title="View all posts filed under PHP">PHP</a><div class="avhec-widget-count"> (58)</div></div>
<ul class="children">
	<li class="cat-item cat-item-109"><div class="avhec-widget-line"><a href="http://unmi.cc/category/php/joomla/" title="View all posts filed under Joomla">Joomla</a><div class="avhec-widget-count"> (10)</div></div>
</li>
	<li class="cat-item cat-item-4"><div class="avhec-widget-line"><a href="http://unmi.cc/category/php/wordpress/" title="View all posts filed under WordPress">WordPress</a><div class="avhec-widget-count"> (39)</div></div>
</li>
</ul>
</li>
	<li class="cat-item cat-item-26"><div class="avhec-widget-line"><a href="http://unmi.cc/category/windows/" title="View all posts filed under Windows">Windows</a><div class="avhec-widget-count"> (14)</div></div>
</li>
	<li class="cat-item cat-item-40"><div class="avhec-widget-line"><a href="http://unmi.cc/category/xmldom/" title="View all posts filed under XML/DOM">XML/DOM</a><div class="avhec-widget-count"> (14)</div></div>
</li>
	<li class="cat-item cat-item-110"><div class="avhec-widget-line"><a href="http://unmi.cc/category/groovy/" title="View all posts filed under Groovy">Groovy</a><div class="avhec-widget-count"> (17)</div></div>
</li>
	<li class="cat-item cat-item-281"><div class="avhec-widget-line"><a href="http://unmi.cc/category/cvb/" title="View all posts filed under C++/VB">C++/VB</a><div class="avhec-widget-count"> (21)</div></div>
</li>
	<li class="cat-item cat-item-74"><div class="avhec-widget-line"><a href="http://unmi.cc/category/mid-ware/" title="View all posts filed under Mid-Ware">Mid-Ware</a><div class="avhec-widget-count"> (23)</div></div>
</li>
	<li class="cat-item cat-item-9"><div class="avhec-widget-line"><a href="http://unmi.cc/category/dotnet/" title="View all posts filed under .Net">.Net</a><div class="avhec-widget-count"> (25)</div></div>
</li>
	<li class="cat-item cat-item-106"><div class="avhec-widget-line"><a href="http://unmi.cc/category/database/" title="View all posts filed under Database">Database</a><div class="avhec-widget-count"> (31)</div></div>
</li>
	<li class="cat-item cat-item-20"><div class="avhec-widget-line"><a href="http://unmi.cc/category/linuxunix/" title="View all posts filed under Linux/Unix">Linux/Unix</a><div class="avhec-widget-count"> (36)</div></div>
</li>
	<li class="cat-item cat-item-3"><div class="avhec-widget-line"><a href="http://unmi.cc/category/quartz/" title="View all posts filed under Quartz">Quartz</a><div class="avhec-widget-count"> (65)</div></div>
</li>
	<li class="cat-item cat-item-83"><div class="avhec-widget-line"><a href="http://unmi.cc/category/web-js/" title="View all posts filed under Web/JS">Web/JS</a><div class="avhec-widget-count"> (71)</div></div>
</li>
	<li class="cat-item cat-item-67 current-cat"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/" title="View all posts filed under Java/JEE">Java/JEE</a><div class="avhec-widget-count"> (298)</div></div>
<ul class="children">
	<li class="cat-item cat-item-126"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/ibatis/" title="View all posts filed under iBatis">iBatis</a><div class="avhec-widget-count"> (4)</div></div>
</li>
	<li class="cat-item cat-item-198"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/hibernate/" title="View all posts filed under Hibernate">Hibernate</a><div class="avhec-widget-count"> (11)</div></div>
</li>
	<li class="cat-item cat-item-171"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/jvm/" title="View all posts filed under JVM">JVM</a><div class="avhec-widget-count"> (15)</div></div>
</li>
	<li class="cat-item cat-item-197"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/spring/" title="View all posts filed under Spring">Spring</a><div class="avhec-widget-count"> (20)</div></div>
</li>
	<li class="cat-item cat-item-111"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/scala/" title="View all posts filed under Scala">Scala</a><div class="avhec-widget-count"> (27)</div></div>
</li>
	<li class="cat-item cat-item-554"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/playframework/" title="View all posts filed under PlayFramework">PlayFramework</a><div class="avhec-widget-count"> (35)</div></div>
</li>
	<li class="cat-item cat-item-152"><div class="avhec-widget-line"><a href="http://unmi.cc/category/javajee/struts/" title="View all posts filed under Struts">Struts</a><div class="avhec-widget-count"> (36)</div></div>
</li>
</ul>
</li>
</ul></li>
<li id="text-12" class="widget widget_text"><h2 class="widgettitle">友情链接</h2>
			<div class="textwidget">
		<!-- start[WP Render Blogroll Links 2.1.7] -->
<div class="linkcat"><h2 class="linkcattitle"> </h2>
			<ul class="xoxo blogroll" id="catid">
				<li class="brlink"><a href="http://ericxiong.javaeye.com" rel="external" target="_blank">Eric&#039;s Blog</a></li>
				<li class="brlink"><a href="http://www.webspherechina.net/" rel="external" target="_blank">WebSphere开发与应用社区</a></li>
				<li class="brlink"><a href="http://www.cnblogs.com/simonshi2012/" rel="external" target="_blank">放飞梦想，专注于Mobile开发</a></li>
				<li class="brlink"><a href="http://www.monring.com" rel="external" target="_blank">Arain前端学习日志</a></li>
				<li class="brlink"><a href="http://www.chunfengxiyu.com" rel="external" target="_blank">春风细雨</a></li>

			</ul>
		</div>


		<!-- end[WP Render Blogroll Links 2.1.7] --></div>
		</li>
<li id="recentcomments" class="widget widget_recentcomments"><h2 class="widgettitle">最近评论</h2>
<ul><li class="rc-navi rc-clearfix"><span class="rc-loading">Loading...</span></li><li id="rc-comment-temp" class="rc-item rc-comment rc-clearfix"><div class="rc-info"></div><div class="rc-timestamp"></div><div class="rc-excerpt"></div></li><li id="rc-ping-temp" class="rc-item rc-ping rc-clearfix"><span class="rc-label"></span></li></ul></li>
<li id="views-3" class="widget widget_views"><h2 class="widgettitle">阅读排行</h2>
<ul>
<li><a href="http://unmi.cc/vmware9-install-mac-os-x-mountain-lion/"  title="VMware 9 安装 Mac OS X 10.8 Mountain Lion 图文全程">VMware 9 安装 Mac OS X 10.8 Mountain Lion 图文全程</a>(47,701)</li><li><a href="http://unmi.cc/ios-coreplot-chart-started/"  title="iOS 使用 Core Plot 绘制统计图表入门">iOS 使用 Core Plot 绘制统计图表入门</a>(13,752)</li><li><a href="http://unmi.cc/ios-bounds-frame/"  title="iOS开发 frame 与 bounds 的区别与关系">iOS开发 frame 与 bounds 的区别与关系</a>(11,700)</li><li><a href="http://unmi.cc/objective-c-urlencode/"  title="Objective-C 对 URL 进行 URLEncode 编码">Objective-C 对 URL 进行 URLEncode 编码</a>(9,353)</li><li><a href="http://unmi.cc/windows-port-forwarding-passport/"  title="Windows 下推荐使用的端口转发(映射/重定向)工具：PassPort">Windows 下推荐使用的端口转发(映射/重定向)工具：PassPort</a>(8,491)</li></ul>
</li>
<li id="colorful_tag_cloud-3" class="widget widget_colorful_tag_cloud"><h2 class="widgettitle">标签云</h2>
<a href='http://unmi.cc/tag/lambda/' class='tag-link-672' title='8' style='font-size: 8.67307692308pt; color: #b7b7b7'>lambda</a>
<a href='http://unmi.cc/tag/vc/' class='tag-link-265' title='10' style='font-size: 9.88461538462pt; color: #959595'>VC</a>
<a href='http://unmi.cc/tag/spring/' class='tag-link-197' title='23' style='font-size: 14.4615384615pt; color: #652c91'>Spring</a>
<a href='http://unmi.cc/tag/tomcat/' class='tag-link-187' title='11' style='font-size: 10.4230769231pt; color: #81ca9d'>Tomcat</a>
<a href='http://unmi.cc/tag/html/' class='tag-link-84' title='7' style='font-size: 8pt; color: #b7b7b7'>html</a>
<a href='http://unmi.cc/tag/jquery/' class='tag-link-46' title='11' style='font-size: 10.4230769231pt; color: #81ca9d'>jQuery</a>
<a href='http://unmi.cc/tag/objective-c/' class='tag-link-437' title='23' style='font-size: 14.4615384615pt; color: #652c91'>objective-c</a>
<a href='http://unmi.cc/tag/mac/' class='tag-link-436' title='9' style='font-size: 9.34615384615pt; color: #959595'>mac</a>
<a href='http://unmi.cc/tag/ant/' class='tag-link-213' title='8' style='font-size: 8.67307692308pt; color: #b7b7b7'>ant</a>
<a href='http://unmi.cc/tag/unit-test/' class='tag-link-221' title='8' style='font-size: 8.67307692308pt; color: #b7b7b7'>Unit Test</a>
<a href='http://unmi.cc/tag/asp-net/' class='tag-link-37' title='9' style='font-size: 9.34615384615pt; color: #959595'>Asp.Net</a>
<a href='http://unmi.cc/tag/plugin/' class='tag-link-23' title='12' style='font-size: 10.8269230769pt; color: #81ca9d'>plugin</a>
<a href='http://unmi.cc/tag/jvm/' class='tag-link-171' title='13' style='font-size: 11.3653846154pt; color: #00a650'>JVM</a>
<a href='http://unmi.cc/tag/log/' class='tag-link-168' title='9' style='font-size: 9.34615384615pt; color: #959595'>Log</a>
<a href='http://unmi.cc/tag/windows/' class='tag-link-26' title='7' style='font-size: 8pt; color: #b7b7b7'>Windows</a>
<a href='http://unmi.cc/tag/javascript/' class='tag-link-62' title='35' style='font-size: 16.8846153846pt; color: #f68e54'>javascript</a>
<a href='http://unmi.cc/tag/web/' class='tag-link-63' title='16' style='font-size: 12.4423076923pt; color: #197b30'>web</a>
<a href='http://unmi.cc/tag/struts/' class='tag-link-152' title='16' style='font-size: 12.4423076923pt; color: #197b30'>Struts</a>
<a href='http://unmi.cc/tag/php-2/' class='tag-link-33' title='16' style='font-size: 12.4423076923pt; color: #197b30'>php</a>
<a href='http://unmi.cc/tag/java/' class='tag-link-68' title='81' style='font-size: 21.5961538462pt; color: #00f'>Java</a>
<a href='http://unmi.cc/tag/mvc/' class='tag-link-65' title='7' style='font-size: 8pt; color: #b7b7b7'>mvc</a>
<a href='http://unmi.cc/tag/struts2/' class='tag-link-153' title='36' style='font-size: 17.0192307692pt; color: #8fc63d'>Struts2</a>
<a href='http://unmi.cc/tag/joomla/' class='tag-link-109' title='10' style='font-size: 9.88461538462pt; color: #959595'>Joomla</a>
<a href='http://unmi.cc/tag/oracle/' class='tag-link-173' title='22' style='font-size: 14.1923076923pt; color: #652c91'>Oracle</a>
<a href='http://unmi.cc/tag/jdk8/' class='tag-link-670' title='9' style='font-size: 9.34615384615pt; color: #959595'>jdk8</a>
<a href='http://unmi.cc/tag/scala/' class='tag-link-111' title='41' style='font-size: 17.6923076923pt; color: #8fc63d'>Scala</a>
<a href='http://unmi.cc/tag/playframework/' class='tag-link-554' title='23' style='font-size: 14.4615384615pt; color: #652c91'>PlayFramework</a>
<a href='http://unmi.cc/tag/groovy/' class='tag-link-110' title='19' style='font-size: 13.3846153846pt; color: #0054a5'>Groovy</a>
<a href='http://unmi.cc/tag/wordpress-2/' class='tag-link-5' title='39' style='font-size: 17.4230769231pt; color: #8fc63d'>wordpress</a>
<a href='http://unmi.cc/tag/database-2/' class='tag-link-107' title='16' style='font-size: 12.4423076923pt; color: #197b30'>database</a>
<a href='http://unmi.cc/tag/junit/' class='tag-link-310' title='7' style='font-size: 8pt; color: #b7b7b7'>JUnit</a>
<a href='http://unmi.cc/tag/%e7%bf%bb%e8%af%91/' class='tag-link-16' title='86' style='font-size: 22pt; color: #f00'>翻译</a>
<a href='http://unmi.cc/tag/hibernate/' class='tag-link-198' title='13' style='font-size: 11.3653846154pt; color: #00a650'>Hibernate</a>
<a href='http://unmi.cc/tag/was/' class='tag-link-167' title='7' style='font-size: 8pt; color: #b7b7b7'>WAS</a>
<a href='http://unmi.cc/tag/c/' class='tag-link-13' title='10' style='font-size: 9.88461538462pt; color: #959595'>C#</a>
<a href='http://unmi.cc/tag/xslt/' class='tag-link-41' title='9' style='font-size: 9.34615384615pt; color: #959595'>xslt</a>
<a href='http://unmi.cc/tag/ios-2/' class='tag-link-434' title='27' style='font-size: 15.4038461538pt; color: #39b778'>ios</a>
<a href='http://unmi.cc/tag/linux/' class='tag-link-22' title='27' style='font-size: 15.4038461538pt; color: #39b778'>Linux</a>
<a href='http://unmi.cc/tag/sql/' class='tag-link-174' title='9' style='font-size: 9.34615384615pt; color: #959595'>Sql</a>
<a href='http://unmi.cc/tag/css/' class='tag-link-19' title='11' style='font-size: 10.4230769231pt; color: #81ca9d'>css</a>
<a href='http://unmi.cc/tag/logback/' class='tag-link-89' title='7' style='font-size: 8pt; color: #b7b7b7'>Logback</a>
<a href='http://unmi.cc/tag/english/' class='tag-link-66' title='10' style='font-size: 9.88461538462pt; color: #959595'>English</a>
<a href='http://unmi.cc/tag/xml/' class='tag-link-130' title='13' style='font-size: 11.3653846154pt; color: #00a650'>xml</a>
<a href='http://unmi.cc/tag/ubuntu/' class='tag-link-164' title='9' style='font-size: 9.34615384615pt; color: #959595'>Ubuntu</a>
<a href='http://unmi.cc/tag/quartz/' class='tag-link-3' title='62' style='font-size: 20.1153846154pt; color: #0054a5'>Quartz</a></li>
 </ul>
</div>
<div id="center"><div id="squeeze"><div class="right-corner"><div class="left-corner">
<!-- begin content -->
<div class="node"><div class="post-4685 post type-post status-publish format-standard hentry category-javajee tag-java tag-reflect tag-reflectasm">
<h2>Java 下高效的反射工具包 ReflectASM 使用例解</h2>
<span class="submitted">2012-08-17 &#8212; Unmi </span>
<div class="content">
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->
<!-- Post[count: 1] -->
<div class="ezAdsense adsense adsense-leadin" style="float:left;margin:12px;"><script type="text/javascript"><!--
google_ad_client = "ca-pub-1353471013336561";
/* Left Rectangle */
google_ad_slot = "7543595535";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->

<p><a title="ReflectASM" href="http://code.google.com/p/reflectasm/" target="_blank">ReflectASM</a>&nbsp;使用字节码生成的方式实现了更为高效的反射机制。执行时会生成一个存取类来 set/get&nbsp;字段，访问方法或创建实例。一看到&nbsp;ASM&nbsp;就能领悟到&nbsp;ReflectASM&nbsp;会用字节码生成的方式，而不是依赖于&nbsp;Java&nbsp;本身的反射机制来实现的，所以它更快，并且避免了访问原始类型因自动装箱而产生的问题。</p>
<p>下面三个图是 ReflectASM&nbsp;与&nbsp;Java&nbsp;自身反射机制的性能对比，表现很不错的。</p>
<p style="text-align: center;"><img class="aligncenter" alt="" src="http://chart.apis.google.com/chart?chma=100&amp;chtt=Field%20Set/Get&amp;chs=700x62&amp;chd=t:1402081,11339107&amp;chds=0,11339107&amp;chxl=0:%7CJava%20Reflection%7CFieldAccess&amp;cht=bhg&amp;chbh=10&amp;chxt=y&amp;chco=6600FF&amp;.png" width="700" height="62" /></p>
<p style="text-align: center;"><img class="aligncenter" alt="" src="http://chart.apis.google.com/chart?chma=100&amp;chtt=Method%20Call&amp;chs=700x62&amp;chd=t:97390,208750&amp;chds=0,208750&amp;chxl=0:%7CJava%20Reflection%7CMethodAccess&amp;cht=bhg&amp;chbh=10&amp;chxt=y&amp;chco=6600AA&amp;.png" width="700" height="62" /></p>
<p style="text-align: center;"><img class="aligncenter" alt="" src="http://chart.apis.google.com/chart?chma=100&amp;chtt=Constructor&amp;chs=700x62&amp;chd=t:2853063,5828993&amp;chds=0,5828993&amp;chxl=0:%7CJava%20Reflection%7CConstructorAccess&amp;cht=bhg&amp;chbh=10&amp;chxt=y&amp;chco=660066&amp;.png" width="700" height="62" /></p>
<p>测试代码包含在项目文件中.&nbsp;上面图形是在&nbsp; Oracle 的 Java 7u3, server VM&nbsp;下测试出的结果。</p>
<p>下面我们自己来做个测试，测试环境是 Mac OS X 10.8, 2.4G Core 2 Duo, 4G RAM, 64 位&nbsp;JDK 1.6.<span id="more-4685"></span></p>
<p>待反射的类 SomeClass.java</p>
<pre class="brush:java">package cc.unmi.testreflect;

public class SomeClass {
&nbsp;&nbsp; &nbsp;private String name;

&nbsp;&nbsp; &nbsp;public void foo(String name) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;this.name = name;
&nbsp;&nbsp; &nbsp;}
}</pre>
<p>测试类 ReflectasmClient.java</p>
<pre class="brush:java">package cc.unmi.testreflect;

import java.lang.reflect.Method;
import com.esotericsoftware.reflectasm.MethodAccess;

/**
&nbsp;* @author Unmi
&nbsp;*/
public class ReflectasmClient {

&nbsp;&nbsp; &nbsp;public static void main(String[] args) throws Exception {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;testJdkReflect();
//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;testReflectAsm();
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;public static void testJdkReflect() throws Exception {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SomeClass someObject = new SomeClass();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; 5; i++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;long begin = System.currentTimeMillis();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int j = 0; j &lt; 100000000; j++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Method method = SomeClass.class.getMethod("foo", String.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;method.invoke(someObject, "Unmi");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.print(System.currentTimeMillis() - begin +" ");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}

&nbsp;&nbsp; &nbsp;public static void testReflectAsm() {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SomeClass someObject = new SomeClass();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; 5; i++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;long begin = System.currentTimeMillis();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int j = 0; j &lt; 100000000; j++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MethodAccess access = MethodAccess.get(SomeClass.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;access.invoke(someObject, "foo", "Unmi");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.print(System.currentTimeMillis() - begin + " ");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
}</pre>
<p>分别运行 testJdkReflect()&nbsp;和 testReflectAsm 得出各自的运行时间数据，如下：</p>
<p>运行&nbsp;testJdkReflect():&nbsp; 31473 31663 31578 31658 31552</p>
<p>运行 testReflectAsm(): 312814 310666 312867 311234 311792</p>
<p>这个数据是非常恐怖的，似乎在带领我们往相反的方向上走，用 ReflectASM&nbsp;怎么反而耗时多的多，高一个数量级，为什么呢？原因是大部分的时间都耗费在了</p>
<p>MethodAccess access = MethodAccess.get(SomeClass.class);</p>
<p>上，正是生成字节码的环节上，也让你体验到 MethodAccess&nbsp;是个无比耗时的操作，如果把这行放到循环之外会是什么样的结果呢，同时也把方法 testJdkReflect()&nbsp;中的</p>
<p>Method method = SomeClass.class.getMethod("foo", String.class);</p>
<p>也提出去，改变后的 testJdkReflect()&nbsp;和 testReflectAsm()&nbsp;分别如下：</p>
<pre class="brush:java">&nbsp;&nbsp;&nbsp; public static void testJdkReflect() throws Exception {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SomeClass someObject = new SomeClass();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Method method = SomeClass.class.getMethod("foo", String.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; 5; i++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;long begin = System.currentTimeMillis();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int j = 0; j &lt; 100000000; j++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;method.invoke(someObject, "Unmi");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.print(System.currentTimeMillis() - begin +" ");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}

&nbsp;&nbsp; &nbsp;public static void testReflectAsm() {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SomeClass someObject = new SomeClass();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MethodAccess access = MethodAccess.get(SomeClass.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; 5; i++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;long begin = System.currentTimeMillis();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int j = 0; j &lt; 100000000; j++) {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;access.invoke(someObject, "foo", "Unmi");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.print(System.currentTimeMillis() - begin + " ");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}</pre>
<p>再次分别跑下 testJdkReflect()&nbsp;和&nbsp; testReflectAsm()，新的结果如下：</p>
<p>运行&nbsp;testJdkReflect():&nbsp; 1682 1696 1858 1774 1780 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ------&nbsp;平均&nbsp; 1758</p>
<p>运行 testReflectAsm(): 327 549 520 509 514 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ------&nbsp;平均 483.8</p>
<p>胜负十分明显，上面的实验两相一比较，用 ReflectAsm&nbsp;进行方法调用节省时间是 72.48％</p>
<p>也因此可以得到使用 ReflectASM&nbsp;时需特别注意的是，获得类似 MethodAccess&nbsp;实例只做一次，或它的实例应缓存起来，才是真正用好 ReflectASM。</p>
<p>进一步深入的话，不妨看看分别从 testJdkReflect()/testReflectAsm()&nbsp;到&nbsp;SomeClass.foo()&nbsp;过程中到底发生了什么，断点看调用栈。</p>
<p>testJdkReflect()&nbsp;到&nbsp;SomeClass.foo()&nbsp;的调用栈：</p>
<p style="text-align: center;"><img class="aligncenter  wp-image-4688" title="testJdkReflect_debug" alt="" src="http://unmi.cc/wp-content/uploads/2012/08/testJdkReflect_debug.png" /></p>
<p>借助了&nbsp;JDK&nbsp;的 DelegatingMethodAccessorImpl&nbsp;和&nbsp; NativeMethodAccessorImpl。</p>
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->
<!-- Post[count: 2] -->
<div class="ezAdsense adsense adsense-midtext" style="float:left;margin:12px;"><span class="inner_copyright">本文原始链接 <a href='http://unmi.cc/java-reflectasm-bytecode-usage/'>http://unmi.cc/java-reflectasm-bytecode-usage/</a>, 来自 <a href='http://unmi.cc/'>隔叶黄莺 Unmi Blog</a></span></div>
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->

<p>再看 testReflectAsm()&nbsp;到 SomeClass.foo(）的调用栈：</p>
<p style="text-align: center;"><img class="aligncenter  wp-image-4689" title="testReflectAsm_debug" alt="" src="http://unmi.cc/wp-content/uploads/2012/08/testReflectAsm_debug.png" /></p>
<p>可以看到，ReflectAsm&nbsp;在执行 MethodAccess access = MethodAccess.get(SomeClass.class);&nbsp;为你生成了类 SomeClassMethodAccess，经由它来进行后续的方法调用，使得性能上有很可观的改善。</p>
<p>上面只是讲述了，调用方法时如何使用 ReflectAsm，以及怎么确保高效性。下面补上 ReflectAsm&nbsp;更多的用法，翻译自 ReflectAsm&nbsp;官方。</p>
<hr />
<p>ReflectASM&nbsp;反射调用方法:</p>
<pre class="brush:java">SomeClass someObject = ...
MethodAccess access = MethodAccess.get(SomeClass.class);
access.invoke(someObject, "setName", "Awesome McLovin");
String name = (String)access.invoke(someObject, "getName");</pre>
<p>用 ReflectASM&nbsp;反射来 set/get&nbsp;字段值:</p>
<pre class="brush:java">SomeClass someObject = ...
FieldAccess access = FieldAccess.get(SomeClass.class);
access.set(someObject, "name", "Awesome McLovin");
String name = (String)access.get(someObject, "name");</pre>
<p>用 ReflectASM&nbsp;反射来调用构造方法:</p>
<pre class="brush:java">ConstructorAccess&lt;SomeClass&gt; access = ConstructorAccess.get(SomeClass.class);
SomeClass someObject = access.newInstance();</pre>
<p><strong>避免用方法名来查找</strong></p>
<p>为了在重复性的反射来访问方法或字段时最大化性能，应该用方法和字段的索引来定位而不是名称：</p>
<pre class="brush:java">SomeClass someObject = ...
MethodAccess access = MethodAccess.get(SomeClass.class);
int addNameIndex = access.getIndex("addName");
for (String name : names)
&nbsp; &nbsp; access.invoke(someObject, addNameIndex, "Awesome McLovin");</pre>
<p>说到这，不妨再次来验证一下，把 testReflectAsm()&nbsp;方法改为如下：</p>
<pre class="brush:java">&nbsp;&nbsp;&nbsp; public static void testReflectAsm() {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;SomeClass someObject = new SomeClass();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;MethodAccess access = MethodAccess.get(SomeClass.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;int fooIndex = access.getIndex("foo", String.class);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int i = 0; i &lt; 5; i++) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;long begin = System.currentTimeMillis();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for (int j = 0; j &lt; 100000000; j++) {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;access.invoke(someObject, fooIndex, "Unmi");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.print(System.currentTimeMillis() - begin + " ");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}</pre>
<p>运行的输出结果是，你可能想像不到的：</p>
<p>206 182 171 175 171</p>
<p>而用名称查找方法时的测试数据为：327 549 520 509 514</p>
<p>当然你调用的重复性应该带有一点夸张性质的。性能更优化的原因是用名称来查找最科要被转换成索引来查找。</p>
<p><strong>可见性</strong></p>
<p>ReflectASM&nbsp;总是能访问公有成员的.&nbsp;它会尝试在同一个 package&nbsp;中去定义访问类的，并且同一个类加载器去加载。所以，如果安全管理器允许 setAccessible&nbsp;调用成功的话，protected&nbsp;或包私有(package private)&nbsp;的成员也可被访问到.&nbsp;假如 setAccessible&nbsp;失败，仅当当有公有成员可被访问时，不会有异常抛出.&nbsp;私有成员总是无法访问到。</p>
<p><strong>有关异常</strong></p>
<p>当使用 ReflectASM&nbsp;有异常时，栈跟踪更清淅了。这是 Java&nbsp;在反射调用方法时抛出了一个 RuntimeException 异常：</p>
<pre class="brush:java">Exception in thread "main" java.lang.reflect.InvocationTargetException
&nbsp; &nbsp; &nbsp; &nbsp; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&nbsp; &nbsp; &nbsp; &nbsp; at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
&nbsp; &nbsp; &nbsp; &nbsp; at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
&nbsp; &nbsp; &nbsp; &nbsp; at java.lang.reflect.Method.invoke(Method.java:597)
&nbsp; &nbsp; &nbsp; &nbsp; at com.example.SomeCallingCode.doit(SomeCallingCode.java:22)
Caused by: java.lang.RuntimeException
&nbsp; &nbsp; &nbsp; &nbsp; at com.example.SomeClass.someMethod(SomeClass.java:48)
&nbsp; &nbsp; &nbsp; &nbsp; ... 5 more</pre>
<p>再看用 ReflectASM&nbsp;时抛出的同样的异常:</p>
<pre class="brush:java">Exception in thread "main" java.lang.RuntimeException
&nbsp; &nbsp; &nbsp; &nbsp; at com.example.SomeClass.someMethod(SomeClass.java:48)
&nbsp; &nbsp; &nbsp; &nbsp; at com.example.SomeClassMethodAccess.invoke(Unknown Source)
&nbsp; &nbsp; &nbsp; &nbsp; at com.example.SomeCallingCode.doit(SomeCallingCode.java:22)</pre>
<p>如果被 ReflectASM&nbsp;调用的代码抛出了需检测的异常，也需要抛出需检测异常.&nbsp;因为如果你在用 try/catch&nbsp;捕获块中未声明抛出的具体类型的异常时会报编译错误。（Unmi&nbsp;注：这句话的意思是说，比如方法 foo()&nbsp;未声明抛出 IOException，而你 try&nbsp;它时却 catch(IOException)&nbsp;就会出现编译错误）所以当你在用 ReflectASM 反射调用，并需要关心其中抛出的异常时，你必须捕获的异常类型是 Exception。<br/></p>
<div style="margin-top:20px;font-style:italic;color:red">
<p>本文链接 <a href="http://unmi.cc/java-reflectasm-bytecode-usage/">http://unmi.cc/java-reflectasm-bytecode-usage/</a>, 来自 <a href="http://unmi.cc/">隔叶黄莺 Unmi Blog</a></p>
<p>[版权声明] <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/deed.zh"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/2.5/80x15.png" /></a> 本文采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/deed.zh">署名-非商业性使用-相同方式共享 2.5 通用 (CC BY-NC-SA 2.5)</a> 进行许可。</div>
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->
<!-- Post[count: 3] -->
<div class="ezAdsense adsense adsense-leadout" style="float:left;margin:12px;"><!--none--></div>
<!-- Easy AdSense<br/>(Modified by Unmi) V3.01 -->


<div id='jp-relatedposts' class='jp-relatedposts' >
	
</div>
<table id="related_random" style="border:1px dashed green;border-collapse:collapse;" width="100%">
<tr><td width="50%" style="vertical-align:top;padding-left:3px;">
<div class='yarpp-related'>
<p><b>相关文章:</b></p><ol>
<li><a href="http://unmi.cc/java-reflect-exception-handle/" rel="bookmark" title="使用Java的反射调用方法应注意的异常处理">使用Java的反射调用方法应注意的异常处理 </a></li>
<li><a href="http://unmi.cc/understand-java-generic-2/" rel="bookmark" title="步步理解 JAVA 泛型编程(二)">步步理解 JAVA 泛型编程(二) </a></li>
<li><a href="http://unmi.cc/understand-java-generic-3/" rel="bookmark" title="步步理解 JAVA 泛型编程(三)">步步理解 JAVA 泛型编程(三) </a></li>
<li><a href="http://unmi.cc/java-nio-memory-mapping-communicate/" rel="bookmark" title="Java NIO 应用 -- 使用内存映射文件实现进程间通信">Java NIO 应用 -- 使用内存映射文件实现进程间通信 </a></li>
<li><a href="http://unmi.cc/xslt-call-java-method/" rel="bookmark" title="XSLT 调用 Java 的类方法">XSLT 调用 Java 的类方法 </a></li>
</ol>
</div>
</td><td style="vertical-align:top;padding-left:3px;border-left:1px dashed green;">
<p><b>随机文章:</b></p>
<ol class="advanced-random-posts"><li><a href="http://unmi.cc/struts2-download-file-not-found/" title="Struts2 文件下载及找不到文件的处理办法" >Struts2 文件下载及找不到文件的处理办法</a></li>
<li><a href="http://unmi.cc/play2-0-tutorials-cn-template-engine-syntax/" title="Play 2.0 中文资料 - 模板引擎(语法)" >Play 2.0 中文资料 - 模板引擎(语法)</a></li>
<li><a href="http://unmi.cc/xcode-4-use-custom-fonts/" title="Xcode 4 中使用自定义字体，非  Outlet  方式" >Xcode 4 中使用自定义字体，非  Outlet  方式</a></li>
<li><a href="http://unmi.cc/unmi-study-groovy-closure/" title="Unmi 学习 Groovy 之闭包" >Unmi 学习 Groovy 之闭包</a></li>
<li><a href="http://unmi.cc/putty-auto-login/" title="让 Putty 保存密码，自动登陆的三种方法" >让 Putty 保存密码，自动登陆的三种方法</a></li>
</ol></td></tr></table>

</div>
<div class="meta">
类别: <a href="http://unmi.cc/category/javajee/" title="View all posts in Java/JEE" rel="category tag">Java/JEE</a>. 标签:<span class="tags"> <a href="http://unmi.cc/tag/java/" rel="tag">Java</a>, <a href="http://unmi.cc/tag/reflect/" rel="tag">Reflect</a>, <a href="http://unmi.cc/tag/reflectasm/" rel="tag">reflectasm</a></span>. 阅读(1,823). <a href='http://unmi.cc/java-reflectasm-bytecode-usage/feed/'><abbr title="Really Simple Syndication">订阅评论</abbr></a>. <a href="http://unmi.cc/java-reflectasm-bytecode-usage/trackback/" rel="trackback"><abbr title="Universal Resource Locator">TrackBack</abbr></a>.
</div>
</div>
<script type="text/javascript" src="http://unmi.cc/wp-content/themes/garland-revisited/placeholder.js"></script> 
                        <!-- If comments are open, but there are no comments. -->
         
<div id="respond">
<h3><b>进行评论</b></h3>
<div id="cancel-comment-reply"><small><a rel="nofollow" id="cancel-comment-reply-link" href="/java-reflectasm-bytecode-usage/#respond" style="display:none;">点击取消回复</a></small></div>
<form action="http://unmi.cc/wp-comments-post.php" method="post" id="commentform">
<p>
<input type="text" placeholder="您的大名，必填" name="author" id="author" value="" size="22" tabindex="1" />
&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" placeholder="电邮，必填，不会公开" name="email" id="email" value="" size="22" tabindex="2" />
&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" placeholder="网站/博客，可选" name="url" id="url" value="" size="22" tabindex="3" />
</p>
<p><textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p> 
<!-- <p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p> -->
<p>
  <span>
        <input type="text" placeholder="请输入验证码，必须" name="mcspvalue" id="mcspvalue" value="" size="22" tabindex="4" />
        <label for="mcspvalue">5 + 7 = ?</label>
        <input type="hidden" name="mcspinfo" value="95db9" />
    </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input name="submit" type="submit" id="submit" tabindex="5" value="提交评论" />
<input type='hidden' name='comment_post_ID' value='4685' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="dbcbfb5fdb" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="95"/></p></p>
</form>
 
</div>
<div class="nextprev">
<div class="alignleft"> &laquo; <a href="http://unmi.cc/aspectj-baseon-annotation-method/" rel="prev">AspectJ 基于自定义的方法注解来拦截方法</a></div>
<div class="alignright"> <a href="http://unmi.cc/re-java-regex-replace/" rel="next">再说 Java 中使用正则表达式进行后向引用($1,$2...)</a> &raquo;</div>
</div>
</div><!-- end content -->    
<span class="clear"></span>
<div id="footer">
Copyright &copy; <a href="http://unmi.cc">Unmi 隔叶黄莺</a> 2010.8 
<br />
<a href="/about">关于本站</a> | <a href="/archives">文章归档</a> | <a href="/guestbook">敬请留言</a> | <a href="/feed">RSS 订阅</a> | <a href="/sitemap">网站地图</a><br>Email: <a href="mailto:fantasia@sina.com">fantasia@sina.com</a>。<span style='color:red'>QQ 群</span> <a rel="external" href="http://qun.qq.com/air/#8431580">软件编程实践-8431580</a>, <a rel="external" href="http://qun.qq.com/air/#60047619">Scala&Play-60047619</a></div>
</div></div></div></div> <!-- /.left-corner, /.right-corner, /#squeeze, /#center -->
<div id="sidebar-right" class="sidebar">
</div></div> <!-- /container -->
</div>
<!-- /layout -->
<script type="text/javascript">
  //Google-Analytics
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5377249-2']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_addOrganic','soso', 'w']);
  _gaq.push(['_addOrganic','sogou', 'query']);
  _gaq.push(['_addOrganic','yodao', 'q']);
  _gaq.push(['_addOrganic','bing', 'q']);
  _gaq.push(['_addOrganic','gougou', 'search']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!-- Piwik -->
<script type="text/javascript"> 
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.unmi.cc//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
    g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();

</script>
<noscript><p><img src="http://stats.unmi.cc/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Code --><script>function hefo_popup(url, width, height) {
var left = Math.round(screen.width/2-width/2); var top = 0;
if (screen.height > height) top = Math.round(screen.height/2-height/2);
window.open(url, "share", "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
return false;
}</script><script>
/* <![CDATA[ */
var rcGlobal = {
	serverUrl		:'http://unmi.cc',
	infoTemp		:'%REVIEWER% on %POST%',
	loadingText		:'Loading',
	noCommentsText	:'No comments',
	newestText		:'&laquo; Newest',
	newerText		:'&laquo; Newer',
	olderText		:'Older &raquo;',
	showContent		:'',
	external		:'1',
	avatarSize		:'25',
	avatarPosition	:'left',
	anonymous		:'Anonymous'
};
/* ]]> */
</script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/akismet/_inc/form.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83c'></script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/shBrushAll.js?ver=3.0.83c'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://unmi.cc/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://unmi.cc/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeEclipse.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['class-name'] = 'code_border';
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<link rel='stylesheet' id='yarppRelatedCss-css'  href='http://unmi.cc/wp-content/plugins/yet-another-related-posts-plugin/style/related.css?ver=3.9.1' type='text/css' media='all' />
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/wp-recentcomments/js/wp-recentcomments-jquery.js?ver=2.2.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/unmi.cc\/wp-admin\/admin-ajax.php","post_id":"4685"};
/* ]]> */
</script>
<script type='text/javascript' src='http://unmi.cc/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.67'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201431'></script>

	<script src="http://stats.wordpress.com/e-201431.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.0.2',blog:'15056422',post:'4685',tz:'-5'});
	var load_cmc = function(){linktracker_init(15056422,4685,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script>
</body>
</html>
<!-- Dynamic page generated in 0.455 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-07-28 05:23:16 -->

<!-- super cache -->